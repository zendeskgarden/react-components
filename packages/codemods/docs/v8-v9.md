# v9

As a subcommand of `garden-codemods`, `v8-v9` includes a set of codemods designed to
assist in migrating from Garden v8 to v9. Codemods that address breaking changes are crucial for a
successful migration and should be executed first. Optional transformations
for deprecated components can ease the eventual migration to v10. After applying any transformation,
it is advised to run [prettier](https://prettier.io/) on the updated files to maintain consistent formatting.

## Usage

```sh
Usage: garden-codemods v8-v9 [transform] [paths...] [options]

A collection of codemods to help migrate from Garden v8 to v9

Arguments:
  transform                    The transform to run. If not provided, a list of transforms will be
                               shown.
  paths                        Files or directory to transform. Can be a glob like
                               src/components/**.tsx

Options:
  --force                      Forcibly run codemods despite git status
  --dry                        Perform a dry run
  --print                      Print the transformed files
  --parser <parser>            Choose parser: babel, tsx
  --jscodeshift <jscodeshift>  Directly pass options to jscodeshift (advanced). Ex:
                               --jscodeshift="--verbose=1 --cpus=4"
  -h, --help                   display help for command

To follow the interactive prompt, run "garden-codemods v8-v9"
```

### Examples

#### Interactive prompts

Running `npx garden-codemods v8-v9` outputs:

```sh
Found 15 transforms. Which one would you like to apply?
❯ Breaking change [react-dropdowns]: Update react-dropdowns(.next) following the migration guide
(migrate-dropdowns)
  Breaking change [react-colorpickers]: Rename component imports (colorpickers-renameNamedImports)
  Breaking change [react-datepickers]: Rename component imports (datepickers-renameNamedImports)
  Breaking change [react-modals]: Rename component imports (modals-renameNamedImports)
  Breaking change [react-pagination]: Rename component imports (pagination-renameNamedImports)
 ──────────────
  Deprecated Components [react-chrome]: Update subComponents (subcomponents-chrome)
(Use arrow keys to reveal more choices)

Renames the following import sources:
- @zendeskgarden/react-dropdowns -> @zendeskgarden/react-dropdowns.legacy
- @zendeskgarden/react-dropdowns.next -> @zendeskgarden/react-dropdowns

Then, renames the following subcomponents for renamed @zendeskgarden/react-dropdowns:
- Hint -> Field.Hint
- Label -> Field.Label
- Message -> Field.Message
```

#### Command examples

To rename the subcomponents of react-grid in TypeScript files across multiple folders,
use the following command:

```sh
npx garden-codemods v9 grid-subComponents ./src/app ./src/components --parser tsx
```

For running the datepickers-renameNamedImports migration on files within the `./src` directory,
execute this command:

```sh
npx garden-codemods v9 datepickers-renameNamedImports ./src --jscodeshift="--run-in-band --cpus=4"
```

This command applies the datepickers-renameNamedImports migration and forwards
additional [options](https://github.com/facebook/jscodeshift/blob/main/README.md#usage-cli)
to `jscodeshift`. Note that since the parser flag is omitted, you will be prompted to select one.

## Breaking changes migration

The following codemods help address breaking changes outlined in the
[v9 migration guide](/docs/migration.md#breaking-changes). It is advisable to run these first.

### `migrate-dropdowns`

Renames the following import sources:

- `@zendeskgarden/react-dropdowns` -> `@zendeskgarden/react-dropdowns.legacy`
- `@zendeskgarden/react-dropdowns.next` -> `@zendeskgarden/react-dropdowns`

Then, renames the following subcomponents for the renamed `@zendeskgarden/react-dropdowns`:

- `Hint` -> `Field.Hint`
- `Label` -> `Field.Label`
- `Message` -> `Field.Message`

```sh
npx garden-codemods v9 migrate-dropdowns [paths...] [options]
```

### `colorpickers-renameNamedImports`

Renames `@zendeskgarden/react-colorpickers`'s following component imports:

- `Colorpicker` -> `ColorPicker`
- `ColorpickerDialog` -> `ColorPickerDialog`

```sh
npx garden-codemods v9 colorpickers-renameNamedImports [paths...] [options]
```

### `datepickers-renameNamedImports`

Renames `@zendeskgarden/react-datepickers`'s following component imports:

- `Datepicker` -> `DatePicker`
- `DatepickerRange` -> `DatePickerRange`

```sh
npx garden-codemods v9 datepickers-renameNamedImports [paths...] [options]
```

### `modals-renameNamedImports`

Renames `@zendeskgarden/react-modals`'s following component imports:

- `DrawerModal` -> `Drawer`
- `TooltipModal` -> `TooltipDialog`

```sh
npx garden-codemods v9 modals-renameNamedImports [paths...] [options]
```

### `pagination-renameNamedImports`

Renames `@zendeskgarden/react-pagination`'s following component imports:

- `Pagination` -> `OffsetPagination`

```sh
npx garden-codemods v9 pagination-renameNamedImports [paths...] [options]
```

## Deprecated component migration

These optional codemods help rename components
[deprecated](/docs/migration.md#deprecated-components) in v9.

### `subcomponents-chrome`

Renames `@zendeskgarden/react-chrome`'s following subcomponents:

- `FooterItem` -> `Footer.Item`
- `HeaderItem` -> `Header.Item`
- `HeaderItemIcon` -> `Header.ItemIcon`
- `HeaderItemText` -> `Header.ItemText`
- `HeaderItemWrapper` -> `Header.ItemWrapper`
- `NavItem` -> `Nav.Item`
- `NavItemIcon` -> `Nav.ItemIcon`
- `NavItemText` -> `Nav.ItemText`

```sh
npx garden-codemods v9 subcomponents-chrome [paths...] [options]
```

### `forms-subComponents`

Renames `@zendeskgarden/react-forms`'s following subcomponents:

- `Hint` -> `Field.Hint`
- `Label` -> `Field.Label`
- `Message` -> `Field.Message`

```sh
npx garden-codemods v9 forms-subComponents [paths...] [options]
```

### `grid-subComponents`

Renames `@zendeskgarden/react-grid`'s following subcomponents:

- `Col` -> `Grid.Col`
- `Row` -> `Grid.Row`

```sh
npx garden-codemods v9 grid-subComponents [paths...] [options]
```

### `modals-subComponents`

Renames `@zendeskgarden/react-modals`'s following subcomponents:

- `Body` -> `Modal.Body`
- `Close` -> `Modal.Close`
- `Footer` -> `Modal.Footer`
- `FooterItem` -> `Modal.FooterItem`
- `Header` -> `Modal.Header`

```sh
npx garden-codemods v9 modals-subComponents [paths...] [options]
```

### `well-subComponents`

Renames `@zendeskgarden/react-notification`'s `Well` subcomponents:

- `Paragraph` -> `Well.Paragraph`
- `Title` -> `Well.Title`

```sh
npx garden-codemods v9 well-subComponents [paths...] [options]
```

### `alert-subComponents`

Renames `@zendeskgarden/react-notification`'s `Alert` subcomponents:

- `Close` -> `Alert.Close`
- `Paragraph` -> `Alert.Paragraph`
- `Title` -> `Alert.Title`

```sh
npx garden-codemods v9 alert-subComponents [paths...] [options]
```

### `notification-subComponents`

Renames `@zendeskgarden/react-notification`'s `Notification` subcomponents:

- `Close` -> `Notification.Close`
- `Paragraph` -> `Notification.Paragraph`
- `Title` -> `Notification.Title`

```sh
npx garden-codemods v9 notification-subComponents [paths...] [options]
```

### `tables-subComponents`

Renames `@zendeskgarden/react-tables`'s following subcomponents:

- `Body` -> `Table.Body`
- `Caption` -> `Table.Caption`
- `Cell` -> `Table.Cell`
- `GroupRow` -> `Table.GroupRow`
- `Head` -> `Table.Head`
- `HeaderCell` -> `Table.HeaderCell`
- `HeaderRow` -> `Table.HeaderRow`
- `OverflowButton` -> `Table.OverflowButton`
- `Row` -> `Table.Row`
- `SortableCell` -> `Table.SortableCell`

```sh
npx garden-codemods v9 tables-subComponents [paths...] [options]
```

### `tabs-subComponents`

Renames `@zendeskgarden/react-tabs`'s following subcomponents:

- `Tab` -> `Tabs.Tab`
- `TabList` -> `Tabs.TabList`
- `TabPanel` -> `Tabs.TabPanel`

```sh
npx garden-codemods v9 tabs-subComponents [paths...] [options]
```

### `tooltips-subComponents`

Renames `@zendeskgarden/react-tooltips`'s following subcomponents:

- `Paragraph` -> `Tooltip.Paragraph`
- `Title` -> `Tooltip.Title`

```sh
npx garden-codemods v9 tooltips-subComponents [paths...] [options]
```
