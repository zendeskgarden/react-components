import { Meta, ArgsTable, Canvas, Story } from '@storybook/addon-docs';
import { useArgs } from '@storybook/client-api';
import { DrawerModal } from '@zendeskgarden/react-modals';
import { DrawerModalStory } from './stories/DrawerModalStory';
import { MODAL_BODY as BODY, MODAL_FOOTER_ITEMS as FOOTER_ITEMS } from './stories/data';

<Meta
  title="Packages/Modals/DrawerModal"
  component={DrawerModal}
  subcomponents={{
    'DrawerModal.Body': DrawerModal.Body,
    'DrawerModal.Close': DrawerModal.Close,
    'DrawerModal.Footer': DrawerModal.Footer,
    'DrawerModal.FooterItem': DrawerModal.FooterItem,
    'DrawerModal.Header': DrawerModal.Header
  }}
/>

# API

<ArgsTable />

# Demo

<Canvas>
  <Story
    name="DrawerModal"
    args={{
      hasBody: true,
      body: BODY,
      hasClose: true,
      hasFooter: true,
      hasHeader: true,
      header: 'Header',
      footerItems: FOOTER_ITEMS,
      dialogAriaLabel: 'Header',
      closeAriaLabel: 'Close'
    }}
    argTypes={{
      appendToNode: { control: false },
      hasBody: { name: 'DrawerModal.Body', table: { category: 'Story' } },
      hasClose: { name: 'DrawerModal.Close', table: { category: 'Story' } },
      hasFooter: { name: 'DrawerModal.Footer', table: { category: 'Story' } },
      hasHeader: { name: 'DrawerModal.Header', table: { category: 'Story' } },
      footerItems: { name: 'DrawerModal.FooterItem[]', table: { category: 'Story' } },
      body: { name: 'children', table: { category: 'DrawerModal.Body' } },
      header: { name: 'children', table: { category: 'DrawerModal.Header' } },
      tag: { control: 'text', table: { category: 'DrawerModal.Header' } },
      closeAriaLabel: { name: 'aria-label', table: { category: 'DrawerModal.Close' } },
      dialogAriaLabel: { name: 'aria-label' }
    }}
    parameters={{
      design: {
        allowFullscreen: true,
        type: 'figma',
        url: 'https://www.figma.com/file/6g87L4FdKZTA3knt3Rsfdx/Garden?node-id=174%3A245'
      }
    }}
  >
    {args => {
      const updateArgs = useArgs()[1];
      const handleClick = () => updateArgs({ isOpen: true });
      const handleClose = () => updateArgs({ isOpen: false });
      return <DrawerModalStory {...args} onClick={handleClick} onClose={handleClose} />;
    }}
  </Story>
</Canvas>
